---
title: "AWS CCP (1)"
category: "AWS-CCP"
date: "2023-01-01"
desc: "AWS CCP 시험대비 요약 정리"
thumbnail: "../images/aws-ccp.png"
alt: "alt"
---

[//]: # "17"

> 개념정리가 아닌 주제별로 시험에 나올 내용들을 정리합니다.

---

<br>

# 클라우드 컴퓨팅

클라우드 컴퓨팅이란 IT 리소스를 인터넷을 통해 온디맨드(요구가 있을 때 언제든지 on demend)로 제공하고 사용량 만큼만 비용을 지불하는 것을 말한다.

## 클라우드 컴퓨팅의 이점

![img_1.png](../images/aws-ccp/b.png)

## 클라우드 컴퓨팅의 배포 모델

- 클라우드
  - 클라우드 상에 완전히 배포된 애플리케이션
  - 퍼블릭 클라우드라고 함
- 하이브리드
  - 클라우드 기반 리소스와 그렇지 않은 리소스가 연결되어 있음
  - 클라우드 리소스를 내부 시스템에 연결면서 조직의 인프라를 클라우드로 확장해 감
- 온프레미스
  - 프라이빗 클라우드라고 함

## 클라우드 컴퓨팅 유형

- IaaS(인프라) : ec2, azure 등
- PaaS(플랫폼) : 빈스톡, 구글앱엔진, 라이트세일 등
- SaaS(서비스) : Microsoft365, Google workspace

## AWS Direct Connect

- 온프레미스에서 AWS로 전용 네트워크 연결을 쉽게 설정할 수 있는 클라우드 서비스
- AWS와 사용자의 데이터센터, 사무실 또는 코로케이션 환경 사이에 프라이빗한 연결을 설정

## AWS Site-to-Site VPN

- VPC로 시작하는 인스턴스는 원격 네트워크와 통신할 수 없음
- 연결을 생성하고 연결을 통해 트래픽을 전달하도록 라우팅을 구성하여 VPC에서 원격네트워크에 대한 엑세스를 활성화할 수 있음
- 인터넷 프로토콜 보안 (IPsec) VPN연결을 지원함

---

<br>

# EC2

## Instance Type

- 범용 인스턴스 (General Purpose)
  - 웹서버타 코드 저장소 같은 다양한 작업에 적함
  - 컴퓨팅, 메모리, 네트워킹 간의 균형이 잘 맞음
- 컴퓨팅 최적화 인스턴스 (Compute Optimized)
  - 높은 퍼포먼스의 프로세스가 필요할 때 사용
  - 인스턴스 이름이 C로 시작
- 메모리 최적화 인스턴스
  - 인메모리 데이터베이스에 적합
  - 분산 웹스케일 캐시 저장소에 적합
  - 대규모 비정형 데이터의 실시간 처리 애플리케이션에 적합
  - 보통 R로 시작
- 스토리지 최적화 인스턴스
  - 로컬스토리지에서 대규모의 데이터셋에 접근할 때 적합
  - RDBMS에 적합
  - Redis에 적합
  - I, G로 시작

## 보안그룹

- EC2 인스턴스의 방화벽
- Port로의 엑세를 통제
- 인바운드, 아웃바운드 네트워크를 통제
- 리전과 VPC결합으로 통제되어 있음
  - 지역을 바꾸게 되면, 새 보안그룹을 생성하거나 다른 VPC를 생성해야함
- EC2 외부에 존재하기 때문에 트래픽이 차단되었을 때 EC2에서는 확인이 불가능
- SSH를 위한 별도 보안그룹을 가지는 것이 좋음
- 기본적으로 모든 인바운드 트래픽을 차단되어있고, 아웃바운드 트래픽은 허용되어 있음
- 보안그룹이 다른 보안그룹을 참조할 수 있음

## 인스턴스 구매 옵션

- 온디맨드 인스턴스
  - 짧은 워크로드에 적합
  - 초당 가격지불
  - 선결제가 없고 장기약정이 필요치 않음
- (표준)예약 인스턴스
  - 1 & 3 years
  - 선결제 후결제 모두 가능
  - 선결제 시 최대 75% 할인율을 가짐
  - 장기 워크로드에 적합
- 예약된 인스턴스
  - 1년만 사용
  - 일, 주, 월 단위로 반복되는 용량 예약을 구입할 수 있음
  - 하루 중 특정 시간에만 실행되는 비연속 워크로드에 적합
- Savings Plan
  - 1 & 3 years
  - 특정 사용량을 약정하여 지불
- Spot Instance
  - 매우 짧은 워크로드에 적합
  - 중단 될 수 있는 임시작업에 사용
  - 최대 90% 할인된 금액으로 제공
  - 언제든지 인스턴스가 손실될 수 있음
    - 호텔로 치면, 빈방을 아주 싼값에 쓰고 있지만, 누군가 더 비싼돈을 주고 들어오면 쫓겨나는 것
  - 배치작업, 데이터분석, 이미지 처리, 분산된 워크로드에 적합
  - 초과하는 사용량은 온디맨드로 제공
- 전용 호스트
  - 물리적 서버 전체를 예약하여 Low Level 하드웨어에 대한 가시성을 제공
  - 규정 준수 요구사항이 있거나 기존의 서버 결합 소프트웨어 라이센스를 사용해야 하는 경우에 적합
  - TCP소켓당, 코어당, VM소프트웨어 라이선스 당 청구
- 전용 인스턴스
  - 사용자 전용 하드웨어에 인스턴스를 가짐
  - 인스턴스가 할당된 물리적 서버는 같은 AWS계정의 인스턴스만 할당되어 사용하는 옵션
  - 여러 개의 인스턴스를 하나의 서버에서 운영해야하지만 어떤 서버를 선택하더라도 무리가 없는 경우에 적합
- 용량 예약
  - 온디맨드 인스턴스를 예약
- 전환형 예약 인스턴스
  - 예약인스턴스의 속성을 변경할 수 있음
  - 할인율 최대 54%
  - 1년 또는 3년 약정으로 구매가능

> 이렇게 예약을 지원해주는 서비스들이 더 있음
>
> - DynamoDB 예약 용량
> - ElasticCache 예약 노드
> - RDS 예약 인스턴스
> - RedShift 예약 노드

## 요금 청구

- pending
  - running 상태가 될 준비를 한 상태
  - 처음 시작하거나 stopped 상태를 다시 시작할 때 pending상태가 됨
  - 요금 미청구
- running
  - 인스턴스를 실행하여 사용할 준비가 됨
  - 요금 청구
- stopping
  - 인스턴스를 중지모드 또는 최대절전모드로 전환할 준비 상태
  - 중지 준비인 경우 요금 미청구
  - 최대절전 준비인 경우 요금 청구
- stopped
  - 인스턴스가 종료되고 사용이 불가
  - 언제든지 다시 시작 가능
  - 요금 미청구
- shutting down
  - 인스턴스가 종료할 준비중
  - 요금 미청구
- terminated
  - 인스턴스 영구 삭제
  - 요금 미청구이나, 예약인스턴스는 결제 옵션에 따라 기간이 종료될 때 까지 요금 청구

---

<br>

# EC2 스토리지

## EBS

- EC2에서 사용하도록 설계된 사용하기 쉬운 고성능 블록 스토리지 서비스
- 인스턴스가 실행중인동안 연결 가능한 네트워크 드라이브, USB라고 생각하면 쉬움
- 인스턴스가 종료되어도 EBS는 데이터를 지속할 수 있음
  - 인스턴스를 재생성하고 EBS볼륨을 마운트(저장장치에 접근할 수 있는 경로)하면 데이터를 다시 받을 수 있음
- CCP레벨에서는 하나의 인스턴스에만 연결 가능
- 특정 가용영역에서만 사용 가능
  - 서울에서 생성하고, 미국에서 사용하는 것은 불가능
  - 스냅샷을 이용해서 다른 가용영역으로 볼륨을 옮길 수 있음
- 하나의 인스턴스에서 연결을 해제하고 매우빠르게 다른 인스턴스로 연결할 수 있음

## EBS 스냅샷

- 원하는 시점에 대한 백업
- EBS가 삭제되더라도 스냅샷을 통해 백업이 가능함
- 여러 가용영역과 리전 간에 복제에 사용
- 암호화 된 볼륨 및 스냅샷을 생성할 때 KMS CMK를 사용

## AMI

- Amazon Machine Image
- 사용자 커스텀 인스턴스
- AMI Process from an EC2 instance
  - EC2를 시작하고 사용자 지정으로 변경
  - 인스턴스를 중지시키고 데이터 무결성을 확보
  - AMI를 구축 → EBS스냅샷이 생성됨

## EC2 Image Builder

- EC2인스턴스에 관한 AMI를 자동으로 생성하고 유지하며 검증 및 테스트 할 수 있도록 함
- 일정을 정할 수 있음
  - 주간 일정 설정
  - 패키지 업데이트 시 실행

## EC2 Instance Store

- 호스트 컴퓨터에 물리적으로 연결된 디스크에 존재
- EC2 인스턴스와 연결된 매우 고성능의 하드웨어를 얻는 방법
- I/O 성능 향상을 위해 활용
- 훌륭한 처리량을 가지고 있어 매우 향상된 디스크 성능을 요할 때 활용
- 인스턴스를 중지 또는 종료하면 해당 스토리지가 손실됨
  - 때문에, 임시스토리지라고 하며, 장기적으로 데이터를 보관하기에는 적합하지 않음
- 버퍼, 캐시, 스크래치데이터, 임시콘텐츠를 사용하는 경우 적합
  - 장기스토리지를 쓸거면 EBS를 쓰는게 더 적합함

## EFS

- Elastic File System
- 인스턴스와 연결되는 스토리지(EBS, Instance store, …) 유형
- 네트워크 파일 시스템(NFS)
- EFS하나로 수백개의 EC2 인스턴스에 마운트할 수 있음
- EC2 인스턴스에만 사용 가능
- 여러 가용영역에서 사용 가능
- 가용성과 확장성이 높은 만큼 그 비용이 상당함
- EFS-IA 스토리지 클래스를 활성화시키면 EFS가 자동으로 수명 주기 정책에 따라 마지막으로 엑세스한 시점을 기반으로 파일을 이동
  - EFS파일 시스템에서 EFS표준 스토리지 클래스에 4개의 파일이 있고 마지막 파일은 60일동안 엑세스 되지 않았다면 EFS-IA가 활성화 상태이면 EFS-IA 스토리지 클래스로 이동시킴
  - 다음에 해당 파일에 엑세스하면 EFS 표준 스토리지 클래스로 다시 이동시킴

## FSx

- 타사의 고성능 파일시스템을 얻는 관리형 서비스
- 윈도우용 FSx
  - 윈도우 파일 서버에 설계한 완전관리형
  - 회사의 윈도우 클라이언트가 있으면, 아마존 윈도우 파일(=FSx)에 접근할 수 있고, 윈도우를 설치한 EC2도 FSx에 접근이 가능
- Lustre용 FSx
  - 고성능 컴퓨팅을 위한 완전 관리형 파일 스토리지

---

<br>

# ELB 및 ASG

## 로드밸런서

- 인터넷 트래픽을 다운스트림에 있는 여러 서버(EC2)로 전달
- 정기적으로 다운스트림의 상태를 확인
- 인스턴스 중 하나가 실패하면 트래픽을 해당 인스턴스로 보내지 않도록 하여 EC2의 인스턴스 실패를 숨김
- 여러 가용영역에 걸쳐 사용이 가능

## ELB

- 서버 프로비저닝 필요없이 AWS가 제공
- EC2에서 자체적으로 로드밸런서를 설정하면 유지보수, 통합, 업그레읻, 관리 등 큰 노력이 필요

  ### ALB

  - HTTP/HTTPs 전용
  - 여러 가용영역에서 EC2 인스턴스 같은 여러 대상에 트래픽을 분산
  - 각 타겟그룹이 지정한 프로토콜 및 포트 번호를 사용하여 등록된 타켓에 요청을 라우팅

  ### NLB

  - 네트워크 로드 밸런서
  - 극한의 성능이 요구되는 TCP, UDP(4계층) 및 TLS(전송 계층 보안) 트래픽의 로드밸런싱에 적합
  - 연결수준(4계층)에서 작동한 NLB는 VPC내의 대상으로 트래픽을 라우팅
  - 초당 수백만개의 요청을 처리하면서 지연시간을 매우 낮게 유지
  - 갑작스러운 일시적 트래픽 패턴 처리에도 최적화되어 있음
  - webSocket 유형 애플리케이션에 매우 유용한 장기간 연결을 지원함

  ### CLB

  - 클래식 로드밸런서

- 세가지 유형 모두 애플리케이션의 내결함성(시스템요소일부가 작동이 멈춰도 멈추지 않는 것)에 필요한 고가용성, 자동확장/축소, 강력한 보안 을 가지고 잇음

## Auto Scailing

- 애플리케이션의 로드를 처리할 수 있는 정확한 수의 EC2인스턴스를 보유하도록 보장
- 내결함성 향상
- 가용성 향상
- 비용관리 개선

## ASG

- Auto Scailing Group
- 원하는 용량을 충족하도록 충분한 인스턴스를 실행하여 시작
- 인스턴스가 비정상 상태가 되면 그룹에서는 비정상 인스턴스를 종료하가 대체 인스턴스를 시작
- 인스턴스 수를 동적으로 조절이 가능
- 스케일 인/아웃이 목적임
- 로드밸런서와 함께 동작함
