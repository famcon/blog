---
title: "NodeJS 기초 개념"
category: "TIL"
date: "2022-01-01"
desc: "NodeJS의 기초개념과 기본 내장 모듈"
thumbnail: "../images/NodeJS 기초 개념.png"
alt: "alt"
---

# 💡 노드를 공부하는 이유

1. 빠르게 서버와 클라이언트를 동시에 만들어 아이디어를 구현할 수 있다.

2. 절반이상의 개발자들이 NodeJS를 사용할 줄 안다.

3. 큰 기업들이 NodeJS로 서버를 구현하는 중

4. 쉽고 심플하지만, 파워풀하고 유연하다

5. 강력한 커뮤니티가 있다

기본기가 없으면 다른 것을 배울 때 더 오래 걸릴 수 있음

따라서 전반적인 그림에 대해서 이해를 하고, 기본기를 쌓아가는 순서가 좋다!

<br>

<br>

<br>

# 💡 노드의 특징

- 자바스크립트 런타임
- 싱글스레드
  - 하나의 일을 수행하면 그것이 끝날 때 까지 기다려야 다음 일을 처리한다.
- Non-blocking I/O
  - 일단 콜백을 던져넣고 다음으로 넘어감
- Event-Driven
  - 이벤트를 통해서 등록된 콜백을 호출

<br>

<br>

<br>

# 💡 서버의 동작 방식

### 전통 서버

요청이 들어오면 그 작업을 처리한 후 다음 요청을 받는다.

### 노드JS 서버

요청이 들어오면 DB에 처리해달라고 던져놓고, 또 다음 요청을 받아서 넘긴다.

영상처리같은 무거운 작업에는 CPU에 과도한 작업을 줄 수 있어 적합하지 않지만, 가벼운 요청을 처리하는 작업을 병렬적으로 처리하기에는 적합하다.

<br>

<br>

<br>

# 💡 모듈

모듈이란 파일이 여러 개로 분리되어 있을 때 분리된 파일 각각을 '모듈(module)'이라고 부른다.

### exports와 require

어떤 모듈에서 module.exports 지시자를 적용하면 적요된 변수나 함수를 다른 곳에서 사용할 수 있다.

모듈을 불러오기 위해서는 require 지시자를 사용한다.

> package.json에서 `"type" ="module"`을 추가하면 module을 빼고 export만으로 지정할 수 있으며 require가 아닌 `import * as 내가지정할이름 from '모듈이름'` 으로 불러올 수 있다.

### this

모듈에 있는 exports로 모듈마다 고유 this를 가진다.

<br>

<br>

<br>

# 💡 콘솔

### 로그

- `consol.log`
  - 개발할 때 사용
- `console.info`
  - 중요한 정보에 대해 남기고 싶을 때 사용
- `console.warn`
  - 발생하면 안되지만 치명적인 에러는 아닐 때
- `console.error`
  - 치명적인 에러일 때

### assert

첫번째 인자로 전달한 값이 참이 아닌 경우 로그가 출력되는 API

### time

```js
console.time("for loop")
for (let i = 0; i < 10; i++) {
  i++
}
console.timeEnd("for loop")
```

같은 레이블이 시작하고 끝날 때 까지 얼마나 걸렸는지 확인할 수 있다.

### count

내가 작성한 함수가 내가 예상한 횟수만큼 호출되었는지 확인

### trace

누가 이 함수를 호출 했는 지 확인

디버깅을 할 때 유용하게 사용 가능

<br>

<br>

<br>

# 💡 동기 비동기

동기와 비동기로 동작할 수 있는 rename이라는 가상의 모듈 API를 살펴보자.

- 동기
  - renameSync('f1', 'f2')
    - 에러를 처리하는 콜백이 따로 들어가지 않는다.
    - 만약 에러가 나면 노드가 죽어버린다
    - try문으로 묶어서 사용해야 하기 때문에
    - 가급적 사용하지 않는다.
- 비동기
  - rename('f1', 'f2', function(err,data){})
    - 에러가 발생하면 err에 error내용을 넣는다.
    - 발생하지 않는다면 data에 성공 데이터가 들어간다.
  - promises.rename('f1','f2').then(fucntion(){}).catch()
  - 비동기는 순차적으로 진행되지 않으므로 순차적인 동작이 필요하면 콜백으로 작성해야 한다.

<br>

<br>

<br>

# 💡 버퍼와 스트림

클라이언트가 동영상을 시청할 때 서버에서 동영상을 잘게 나눠서 전송하는 것을 스트리밍이라고 한다.

버퍼는 이 스트리밍 데이터가 누적된 것인데 데이터의 바이트 그 자체이다.

파이프 모듈을 사용하면 스트림과 스트림을 연결해줄 수 있다.

<br>

<br>

<br>

# 💡 이벤트

events 모듈에는 EventEmitter라는 클래스가 있다

EventEmitter에는 on이라는 API로 event를 감지할 수 있고

emit API를 사용해서 직접 event를 발생시킬 수도 있다.

### 이벤트 클래스 만들기

이벤트 이미터를 상속하는 클래스를 하나 생성해서 exports에 추가해준다.

이렇게 하지 않으면 불러온 모듈에 있는 객체와 내가 생성한 객체를 다른 것으로 인식되기 때문에 모듈에서 정의한 동작이 이뤄지지 않는다.
